<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Public facing dynamic visualizations | Nicholas R. David </title> <meta name="author" content="Nicholas R. David"> <meta name="description" content="This guide will demonstrate how to host a public, dynamic, interactive visualization"> <meta name="keywords" content="materials, science, computational"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/snorlax.ico?83f0ed1b0095bc5fa0ffcc6e475d0553"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://nrdavid.github.io/blog/2024/public-dynamic-viz/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav sticky-bottom-footer"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Nicholas</span> R. David </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item "> <a class="nav-link" href="/teaching/">teaching </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Public facing dynamic visualizations</h1> <p class="post-meta"> Created in January 28, 2024 </p> <p class="post-tags"> <a href="/blog/2024"> <i class="fa-solid fa-calendar fa-sm"></i> 2024 </a>   ·   <a href="/blog/tag/tutorials"> <i class="fa-solid fa-hashtag fa-sm"></i> tutorials,</a>   <a href="/blog/tag/code"> <i class="fa-solid fa-hashtag fa-sm"></i> code</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <p>Often times interactive visualizations require code to be executed in response to user input. This guide will demonstrate how to host such a visualization publicly on a server. Everything in this guide is completely <strong><em>free</em></strong>. The visualization used as an example in this tutorial is one made by Nicholas Amano which demonstrates the power of the <a href="https://gibbs3d.mooo.com/rsm/" rel="external nofollow noopener" target="_blank">Regular Solutions Model in 3D</a>.</p> <h2 id="0-creating-a-free-oracle-cloud-account">0. Creating a free Oracle cloud account</h2> <p>There are many services which provide free cloud servers such as AWS, Azure, and Google Cloud, just to name a few. I’ve decided to go with <a href="https://www.oracle.com/cloud/free/" rel="external nofollow noopener" target="_blank">Oracle</a> since they have generous <em>always free</em> server instances. Before we continue, first create a free account. Oracle will ask for a valid form of payment, however rest assured, they will not charge you for the services requested in this tutorial.</p> <h2 id="1-creating-your-oracle-virtual-cloud-network-vcn-and-oracle-cloud-instance-oci">1. Creating your Oracle Virtual Cloud Network (VCN) and Oracle Cloud Instance (OCI)</h2> <p>Now that your account is created, follow the steps below to create your Virtual Cloud Network (VCN) which will grant us complete control over our cloud networking environment.</p> <ol> <li>Go to “Get Started” and choose under “Pinned” Virtual Cloud Networks</li> <li>Select “Compartment” from the left side panel</li> <li>Now select “Start VCN Wizard” and select “Create with Internet”</li> <li>Name your VCN and use all the defaults. Click “Next” then “Create”.</li> <li>Select “View VCN” in the bottom left</li> </ol> <p>Now that our VCN is created, we need to create our instance. Think of the instance as our virtual machine (VM). We’ll configure it with Ubuntu and allocate the maximum amount of resources we’re allowed to get for free.</p> <ol> <li>Under Launch Resources select “Create VM Instance”</li> <li>Under Placement select “edit” and choose “AD 2” <ul> <li>You may need to select a different option other than “AD 2” depending on your region.</li> </ul> </li> <li>Under “Image” and “Shape” select “Edit”</li> <li>Change the Image to Ubutnu (Canonical Ubuntu 22.04)</li> <li>Change the Shape the AMPERE with 4 OCPUs and 24 GB memory</li> <li>Now create new ssh key pair on your system. You can also have Oracle create one for you, but I found this way to be the easiest. <ul> <li> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code> ssh-keygen <span class="nt">-t</span> rsa
</code></pre></div> </div> </li> </ul> </li> <li>Copy and paste your public keys use “Paste public keys” option</li> <li>Select “Use in-transit encryption”</li> <li>Now select “Create”</li> </ol> <p>Now that our instance is created, you can now <code class="language-plaintext highlighter-rouge">ssh</code> into it with the following command (replacing the information relevant to your key and IP).</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh <span class="nt">-i</span> &lt;PATH_TO_PRIVATE_KEY&gt; ubuntu@&lt;VM_IP&gt;
</code></pre></div></div> <p>If you can successfully <code class="language-plaintext highlighter-rouge">ssh</code> into your instance you can move on to the following section</p> <h2 id="2-allowing-public-communication-to-your-server">2. Allowing public communication to your server</h2> <p>Since we ultimately want other people to be able to see the visualizations hosted through your server, we need to configure the VCN to allow for these types of connections.</p> <ol> <li>Go to your VCN</li> <li>Go to your “Public subnet”</li> <li>Go to “Default Security List for …”</li> <li>Select “Add Ingress Rules”</li> <li>Under “Source CIDR” enter: 0.0.0.0/0</li> <li>Under “Destination Port Range” enter: 80</li> <li>Add a description if you want. i.e. Public connect 80</li> <li>Select “Add Ingress rules”</li> <li> <strong>Repeat steps 4-8 but replace port 80 with port 443</strong>. Port 80 is the default port for http connections and port 443 is the default port for http<strong>s</strong> connections.</li> </ol> <p>Now any client can access your server using your IP. However, we’re currently not serving anything on those ports.</p> <h2 id="3-hosting-a-plotly-dash-app">3. Hosting a plotly dash app</h2> <p>To demonstrate the work we’ve done thusfar, we will serve a <a href="https://plotly.com/examples/" rel="external nofollow noopener" target="_blank">plotly dash app</a> from our server. For the remainder of this tutorial, we’ll be using <a href="https://www.docker.com/" rel="external nofollow noopener" target="_blank">Docker</a> extensively to manage various services. I will also provide an example app which you may use if you don’t have one already.</p> <ol> <li>Update and upgrade your instance <ul> <li> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code> <span class="nb">sudo </span>apt update <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>apt upgrade
</code></pre></div> </div> </li> </ul> </li> <li>Install <a href="https://docs.docker.com/engine/install/ubuntu/" rel="external nofollow noopener" target="_blank">Docker</a> on your instance. <ul> <li>If a message about your kernel shows up just hit enter. If you receive a message about restarting your instance, there is a reboot button online in your instance configuration which may be of use.</li> <li>Be sure to verify Docker was installed properly.</li> </ul> </li> <li>Clone the [test][https://github.com/nrdavid/dash-test/tree/main] repository. <ul> <li> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code> git clone https://github.com/nrdavid/dash-test.git
</code></pre></div> </div> </li> </ul> </li> <li>Navigate to the newly cloned repository.</li> <li>Start the application. <ul> <li> <div class="language-plaintext highlighter-rouge"> <div class="highlight"><pre class="highlight"><code> sudo docker compose up --detach
</code></pre></div> </div> </li> </ul> </li> <li>Type your instance IP into your web browser to view your visualization.</li> </ol> <p>Now anyone can view your visualization simply by typing your instance IP into their browser. However, this is just weird. Ideally, we’d want someone to type in some more memorable web address such as google.com.</p> <h2 id="4-create-your-free-domain-name-system-dns">4. Create your free Domain Name System (DNS)</h2> <p>If you have your own DNS, you may use that instead. I’ve found this <a href="https://freedns.afraid.org/" rel="external nofollow noopener" target="_blank">Free DNS</a> to be suitable. Note: For some reason University of Michigan does not like this website and will sometimes block your connection to it. There are a few ways around this (cough cough google translate) which you may remember from grade school :).</p> <ol> <li>Create a free account from <a href="https://freedns.afraid.org/" rel="external nofollow noopener" target="_blank">afraid</a> </li> <li>Go to the “Subdomains” tab in the left panel and select “add”</li> <li>Fill out the “Add a new subdomain” with the following information. <ul> <li>Type: A</li> <li>Subdomain: (Whatever you like)</li> <li>Domain: (Whatever you like). Although I suggest using one with few users as a popular one could cause issues downstream.</li> <li>Destination: YOUR_INSTANCE_IP</li> <li>Complete the captcha. These can be kind of hard so keep hitting “Different Image” until you get an easy one.</li> </ul> </li> <li><strong>Repeat steps 2-3 prepending “traefik” to your subdomain. For example, if your subdomain is “cabbage” add a new subdomain for “traefik.cabbage”. This subdomain will be used in the following section.</strong></li> </ol> <p>After a few minutes (or less), you will be able to navigate to your new domain which should show the visualization served from part 3. However, you’ll notice that a little “not secured” symbol might show up next to the domain name in your browser. This is because we are using HTTP instead of HTTP<strong>s</strong>. We ought to really use the latter since it’s more secure.</p> <h2 id="5-putting-the-s-in-https">5. Putting the ‘S’ in HTTPS</h2> <p>To create a secure site that others can visit, we need to obtain Transport Layer Security (TLS) certificates, also known as Secure Sockets Layer (SSL). These are digital objects that allows systems to verify the identity and subsequently establish an encrypted network connection to another system. There are a few different ways of doing this, but in this tutorial we will be using <a href="https://letsencrypt.org/" rel="external nofollow noopener" target="_blank">Let’s Encrypt</a>, a nonprofit certificate authority providing TLS certificates to 363 million websites. In addition, we will also be using <a href="https://traefik.io/traefik/" rel="external nofollow noopener" target="_blank">traefik</a> to act as a reverse proxy and load balancer. The services we set up below are <em>complicated</em> and I will not be explaining how they work in this tutorial. <a href="https://github.com/tiangolo/blog-posts/blob/master/deploying-fastapi-apps-with-https-powered-by-traefik/README.md" rel="external nofollow noopener" target="_blank">Tiangolo</a>, the creator of FastAPI (which we will also be using here), provides an in detail tutorial and explanation of deploying FastAPI (and other) apps with HTTPS powered by Traefik. The service created below also uses (Uvicorn)[https://www.uvicorn.org/], an ASGI web server implementation for Python. Because Plotly Dash is old and not optimized for ASGI, we also use <a href="https://flask.palletsprojects.com/en/3.0.x/" rel="external nofollow noopener" target="_blank">Flask</a> which depends on the WSGI toolkit.</p> <ol> <li>Begin by stopping your Docker container from the previous sections which is currently serving our visualization. <ul> <li> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code> <span class="nb">sudo </span>docker ps
</code></pre></div> </div> </li> <li>Copy the CONTAINER ID</li> <li> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code> <span class="nb">sudo </span>docker stop CONTAINER_ID
</code></pre></div> </div> </li> </ul> </li> <li>Clone the following repository: https://github.com/nrdavid/dash-fastapi-public</li> <li>Change to the root user of your instance <ul> <li> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code> <span class="nb">sudo </span>su
</code></pre></div> </div> </li> </ul> </li> <li>Edit the <code class="language-plaintext highlighter-rouge">docker-compose.traefik.yml</code> file. Change the following references to your traefik subdomain. Also modify the last line below, inputting your email for “example@email.com”. <ul> <li>Line 19: traefik.http.routers.traefik-dashboard-http.rule=Host(<code class="language-plaintext highlighter-rouge">traefik.example.com</code>)</li> <li>Line 24: traefik.http.routers.traefik-dashboard-https.rule=Host(<code class="language-plaintext highlighter-rouge">traefik.example.com</code>)</li> <li>Line 55: certificatesresolvers.le.acme.email=example@email.com</li> </ul> </li> <li>Edit the <code class="language-plaintext highlighter-rouge">docker-compose.yml</code>. <ul> <li>Line 13: traefik.http.routers.app-http.rule=Host(<code class="language-plaintext highlighter-rouge">example.com</code>)</li> <li>Line 18: traefik.http.routers.app-https.rule=Host(<code class="language-plaintext highlighter-rouge">example.com</code>)</li> </ul> </li> <li>Since these files contain references to environment variables, we’ll need to set those. You can change the USERNAME and PASSWORD specified below to your choosing. These will be used for logging into your traefik dashboard via basic HTTPS auth. <ul> <li> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code> <span class="nb">export </span><span class="nv">USERNAME</span><span class="o">=</span>admin
</code></pre></div> </div> </li> <li> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code> <span class="nb">export </span><span class="nv">PASSWORD</span><span class="o">=</span>change_this
</code></pre></div> </div> </li> </ul> </li> <li>We actually end up using a hashed version of the password above in the compose.yml (don’t worry you won’t need to remember this). <ul> <li> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code> <span class="nb">export </span><span class="nv">HASHED_PASSWORD</span><span class="o">=</span><span class="si">$(</span>openssl passwd <span class="nt">-apr1</span> <span class="nv">$PASSWORD</span><span class="si">)</span>
</code></pre></div> </div> </li> </ul> </li> <li>Create the Docker network. <ul> <li> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code> docker network create traefik-public
</code></pre></div> </div> </li> </ul> </li> <li>Start the traefik service. <ul> <li> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code> docker compose <span class="nt">-f</span> docker-compose.traefik.yml up <span class="nt">-d</span>
</code></pre></div> </div> </li> <li>Note: If you receive some error saying “too many certificates issued for…” choose a different subdomain from afraid. Also you may omit the <code class="language-plaintext highlighter-rouge">-d</code> flag in the above command to receive output from Docker on the operation.</li> </ul> </li> <li>Start your visualization service. <ul> <li> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>docker compose <span class="nt">-f</span> docker-compose.yml up <span class="nt">-d</span>
</code></pre></div> </div> </li> <li>Note. If you for some reason have any “orphaned” containers, it might be a good idea to clean those up.</li> </ul> </li> <li>If you are able to navigate to both your visualization subdomain and traefik sub-subdomain, and HTTPS appears, then you’re all set! Note that the actual visualization will be located at “/rsm”.</li> </ol> <h2 id="6-conclusion">6. Conclusion</h2> <p>This portion of the tutorial utilizes various different services to obtain the end product, therefore there is a lot that can go wrong. Just remember that google is your best friend :). With this created tool you can literally host <em>whatever you want</em>. It’s extremely powerful what we can do within this framework; the possibilities are endless. Good luck!</p> </div> </article> </div> </div> <footer class="sticky-bottom mt-5" role="contentinfo"> <div class="container"> © Copyright 2025 Nicholas R. David. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Last updated: January 02, 2025. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?70d799092f862ad98c7876aa47712e20"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>